/**:
  ros__parameters:
    # Core EKF Parameters
    frequency: 50.0 # Filter update rate (Hz)
    sensor_timeout: 0.1 
    two_d_mode: true 

    # Frame Configuration
    map_frame: robot_map 
    odom_frame: robot_odom 
    base_link_frame: robot_base_footprint 
    world_frame: robot_odom

    # Transform publishing
    publish_tf: true
    publish_acceleration: false

    # Process Noise Covariance (15x15 diagonal)
    # Order: x, y, z, roll, pitch, yaw, vx, vy, vz, vroll, vpitch, vyaw, ax, ay, az 
    process_noise_covariance: [
      0.05,  0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,
      0.0,   0.05,  0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,
      0.0,   0.0,   0.06,  0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,
      0.0,   0.0,   0.0,   0.03,  0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,
      0.0,   0.0,   0.0,   0.0,   0.03,  0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,
      0.0,   0.0,   0.0,   0.0,   0.0,   0.06,  0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,
      0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.025, 0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,
      0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.025, 0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,
      0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.04,  0.0,   0.0,   0.0,   0.0,   0.0,   0.0,
      0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.01,  0.0,   0.0,   0.0,   0.0,   0.0,
      0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.01,  0.0,   0.0,   0.0,   0.0,
      0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.02,  0.0,   0.0,   0.0,
      0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.01,  0.0,   0.0,
      0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.01,  0.0,
      0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.0,   0.015
    ]

    # Initial Estimate Covariance (15x15 diagonal)
    initial_estimate_covariance: [
      1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,  # X
      0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,  # Y
      0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,  # Z
      0.0, 0.0, 0.0, 0.1, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,  # Roll
      0.0, 0.0, 0.0, 0.0, 0.1, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,  # Pitch
      0.0, 0.0, 0.0, 0.0, 0.0, 0.2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,  # Yaw
      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,  # Vx
      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,  # Vy
      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,  # Vz
      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.1, 0.0, 0.0, 0.0, 0.0, 0.0,  # Vroll
      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.1, 0.0, 0.0, 0.0, 0.0,  # Vpitch
      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.1, 0.0, 0.0, 0.0,  # Vyaw
      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.5, 0.0, 0.0,  # Ax
      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.5, 0.0,  # Ay
      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.5   # Az
    ]

    # IMU Configuration (imu0)
    imu0: /atlas/imu
    imu0_config: [false, false, false,  # x, y, z position 
                  false, false, false, # roll, pitch, yaw orientation
                  false, false, false, # x, y, z velocity
                  true, true, true, # roll, pitch, yaw angular velocity
                  false, false, false] # x, y, z linear acceleration
    imu0_nodelay: false
    imu0_differential: false
    imu0_relative: false
    imu0_queue_size: 10
    imu0_remove_gravitational_acceleration: true

   # LIO-SAM odometry: absolute 6-DoF pose + twist
    odom0: /lio_sam/mapping/odometry
    # x y z  roll pitch yaw   vx vy vz  vroll vpitch vyaw  ax ay az
    odom0_config: [ true, true, false,  
                    false, false, true,
                    true, true, false,  
                    false, false, true,  
                    false,false,false ]
    odom0_differential: false
    odom0_relative:     false
    odom0_queue_size: 10   

    # Optional: keep wheel odom only for twist smoothing
    # odom1: /atlas/robotnik_base_controller/odometry
    # odom1_config: [ true, true, false,   false,false,true,
    #                 true, true, false,   false,false,true,   false,false,false ]
    # odom1_differential: false
    # odom1_relative:     false
    # odom1_queue_size: 5
    
    # Debug and Tuning
    print_diagnostics: true             # Enable diagnostic output
    debug: true                      # Set to true for verbose debugging
    debug_out_file: /tmp/debug_ekf_localization.txt
    
    # Smoothing and Prediction
    smooth_lagged_data: true           # Smooth out-of-order measurements
    history_length: 300.0               # Keep 6 seconds of history at 50Hz
    
    # Advanced Parameters (Only for UKF; Harmless for EKF)
    alpha: 0.001                       # Small alpha for numerical stability
    kappa: 0.0                        # Kappa parameter for unscented transform
    beta: 2.0                         # Beta parameter for unscented transform
    
    # Rejection Thresholds (Mahalanobis distance)
    imu0_twist_rejection_threshold: 5.0     # Reject IMU twist updates beyond this threshold  
    odom0_pose_rejection_threshold: 5.0     # Reject odom pose updates beyond this threshold
    odom0_twist_rejection_threshold: 5.0    # Reject odom twist updates beyond this threshold          